# Phase 1: Create Minimal Application

## Objective

Create a minimal promptgrade.ai application that displays "Welcome to
promptgrade.ai" and integrates with the existing build system.

## Tasks

### 1. Directory Structure

Create `apps/promptgrade-ai/` with the following structure:

```
apps/promptgrade-ai/
├── AppRoot.tsx
├── ClientRoot.tsx
├── server.tsx
├── index.html
├── vite.config.ts
├── deno.jsonc
├── src/
│   ├── App.tsx
│   └── index.css
├── components/
│   └── Home.tsx
├── contexts/
│   └── AppEnvironmentContext.tsx
├── server/
│   └── components/
│       └── ServerRenderedPage.tsx
├── public/
└── static/
    └── build/     (generated by vite)
```

Note: The compiled binary outputs to root `build/promptgrade-ai`

### 2. Core Files Implementation

#### `AppRoot.tsx`

- Root component that renders the Home component
- Simplified version without routing (unlike boltfoundry-com)

#### `ClientRoot.tsx`

- Client-side entry point for React hydration
- Renders App component (which contains AppEnvironmentProvider → AppRoot → Home)

#### `server.tsx`

- Deno server with SSR using react-dom/server
- Serves on port 9001 (production server)
- Handles static assets from static/build directory
- Returns server-rendered HTML with hydration script

#### `src/App.tsx`

- Main app component that provides BfDsProvider
- Wraps AppRoot with AppEnvironmentProvider
- Mirrors boltfoundry-com structure

#### `components/Home.tsx`

- Simple component displaying "Welcome to promptgrade.ai"
- Uses BfDs components/styling where appropriate

#### `index.html`

- Basic HTML template for development
- Includes root div and script tags

#### `vite.config.ts`

- Vite configuration matching boltfoundry-com patterns
- React plugin configuration
- Build output to `static/build/`
- Dev server port 9081, HMR port 9082

#### `deno.jsonc`

- Minimal config for the app
- No new tasks (inherits from root workspace)
- React JSX configuration

#### `contexts/AppEnvironmentContext.tsx`

- Simplified environment context (no auth/user)
- Provides server props to client

#### `server/components/ServerRenderedPage.tsx`

- HTML wrapper for SSR
- Injects environment variables for hydration
- Loads built CSS and JS assets

#### `src/index.css`

- Basic styles
- Can import BfDs styles if needed

### 3. Key Implementation Details

- **Ports**:
  - Production server: 9001
  - Vite dev server: 9081
  - Vite HMR: 9082
- **BfDs Integration**: Use BfDsProvider for consistent styling
- **SSR**: Full server-side rendering like boltfoundry-com
- **Copy patterns from boltfoundry-com**: Include all dependencies and patterns
  to reduce friction

### 4. Success Criteria

- [ ] `bft dev promptgrade-ai` starts development server on port 9001
- [ ] Page displays "Welcome to promptgrade.ai"
- [ ] `bft compile promptgrade-ai` builds the application (outputs to
      `build/promptgrade-ai`)
- [ ] No TypeScript errors
- [ ] Consistent code style with existing apps

### 5. Implementation Order

1. Create directory structure
2. Copy and adapt files from boltfoundry-com as templates
3. Remove unnecessary complexity (complex routing, auth) but keep the same
   dependency structure
4. Test development server
5. Test production build
